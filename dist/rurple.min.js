!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PIXI")):"function"==typeof define&&define.amd?define(["PIXI"],e):"object"==typeof exports?exports.rurple=e(require("PIXI")):t.rurple=e(t.PIXI)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="dist/",e(0)}([function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.control=e.view=void 0;var o=r(1),a=n(o),i=r(5),s=n(i);e.view={Player:a["default"]},e.control={SimpleControl:s.SimpleControl,InteractiveControl:s.InteractiveControl}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),s=n(i),u=r(4),l=n(u),h=function(){function t(e,r){o(this,t),this.mapData=new l["default"](e),this.mapDrawer=new s["default"](r,this.mapData)}return a(t,[{key:"attachAt",value:function(t){t.appendChild(this.mapDrawer.renderer.view),this.startAnimate()}},{key:"startAnimate",value:function(){var t=this,e=function r(){requestAnimationFrame(r),t.mapDrawer.render()};e()}}]),t}();e["default"]=h},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=r(3),l=n(u),h=function(t){function e(t,r){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this));return t=t||{},t.renderWidth=t.renderWidth||800,t.renderHeight=t.renderHeight||600,t.backgroundColor=t.hasOwnProperty("backgroundColor")?t.backgroundColor:11259375,t.lineColor=t.hasOwnProperty("lineColor")?t.lineColor:0,n.config=t,n.mapData=r,n.graphics=new l.Graphics,n.addChild(n.graphics),n.renderer=l.autoDetectRenderer(n.config.renderWidth,n.config.renderHeight,{backgroundColor:n.config.backgroundColor}),n.draw(),n}return i(e,t),s(e,[{key:"draw",value:function(){this.graphics.clear();for(var t=10,e=Math.min((this.config.renderWidth-2*t)/this.mapData.numColumns,(this.config.renderHeight-2*t)/this.mapData.numRows),r=5,n=1,o=1;o<this.mapData.numColumns;o++)for(var a=0;a<this.mapData.numRows;a++){var i=(o-1)*this.mapData.numRows+a;this.graphics.lineStyle(this.mapData.verticalWalls[i]?r:n,this.config.lineColor,1),this.graphics.moveTo(o*e,a*e),this.graphics.lineTo(o*e,(a+1)*e)}for(var a=1;a<this.mapData.numRows;a++)for(var o=0;o<this.mapData.numColumns;o++){var i=(a-1)*this.mapData.numColumns+o;this.graphics.lineStyle(this.mapData.horizontalWalls[i]?r:n,this.config.lineColor,1),this.graphics.moveTo(o*e,a*e),this.graphics.lineTo((o+1)*e,a*e)}this.graphics.lineStyle(r,this.config.lineColor,1),this.graphics.moveTo(0,0),this.graphics.lineTo(this.mapData.numColumns*e,0),this.graphics.lineTo(this.mapData.numColumns*e,this.mapData.numRows*e),this.graphics.lineTo(0,this.mapData.numRows*e),this.graphics.lineTo(0,0),this.graphics.x=(this.config.renderWidth-e*this.mapData.numColumns)/2,this.graphics.y=(this.config.renderHeight-e*this.mapData.numRows)/2,this.gridSize=e}},{key:"render",value:function(){this.draw(),this.renderer.render(this)}}]),e}(l.Container);e["default"]=h},function(e,r){e.exports=t},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){r(this,t)}return n(t,null,[{key:"encode",value:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=t.slice();r.length%6!=0;)r.push(0);for(var n="",o=0;o<r.length;o+=6){for(var a=0,i=0;6>i;i++)a=a<<1|!!r[o+i];n+=e.charAt(a)}return n}},{key:"decode",value:function(t,e){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[],o=0;o<t.length;o++)for(var a=r.indexOf(t.charAt(o)),i=5;i>=0;i--)n.push(a>>i&1);return n.slice(0,e)}}]),t}(),a=function(){function t(e){r(this,t),e=e||{},this._numRows=e.numRows||15,this._numColumns=e.numColumns||15,this.robotX=e.hasOwnProperty("robotX")?e.robotX:1,this.robotY=e.hasOwnProperty("robotY")?e.robotY:1,this.robotDir=e.robotDir||0;var n=(this.numColumns-1)*this.numRows;if(e.verticalWalls)this.verticalWalls=o.decode(e.verticalWalls,n);else{this.verticalWalls=[];for(var a=0;n>a;a++)this.verticalWalls.push(Math.random()<.5)}var i=(this.numRows-1)*this.numColumns;if(e.horizontalWalls)this.horizontalWalls=o.decode(e.horizontalWalls,i);else{this.horizontalWalls=[];for(var a=0;i>a;a++)this.horizontalWalls.push(Math.random()<.5)}}return n(t,[{key:"wallAt",value:function(t,e){var r=0,n=1,o=2,a=3,i=[0,0,0,0];return 1==t?i[o]=!0:i[o]=this.verticalWalls[(t-2)*this.numRows+(e-1)],t==this.numColumns?i[r]=!0:i[r]=this.verticalWalls[(t-1)*this.numRows+(e-1)],1==e?i[a]=!0:i[a]=this.horizontalWalls[(e-2)*this.numColumns+(t-1)],e==this.numRows?i[n]=!0:i[n]=this.horizontalWalls[(e-1)*this.numColumns+(t-1)],i}},{key:"numRows",get:function(){return this._numRows}},{key:"numColumns",get:function(){return this._numColumns}}]),t}();e["default"]=a},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveControl=e.SimpleControl=void 0;var u=r(3),l=n(u),h=function(t){function e(t){o(this,e);var r=a(this,Object.getPrototypeOf(e).call(this)),n=new l.Graphics;return n.beginFill(2236962),n.drawCircle(0,0,t),n.beginFill(16777215),n.drawCircle(7,0,2),r.addChild(n),r}return i(e,t),e}(l.Container),c=e.SimpleControl=function(){function t(e){o(this,t),this.mapDrawer=e.mapDrawer,this.mapData=e.mapData,this.robot=new h(this.mapDrawer.gridSize/2-5),this.mapDrawer.addChild(this.robot),this.drawRobot()}return s(t,[{key:"drawRobot",value:function(){var t=this.mapDrawer.graphics.x-this.mapDrawer.gridSize/2,e=this.mapDrawer.graphics.y-this.mapDrawer.gridSize/2;this.robot.rotation=.5*Math.PI*this.mapData.robotDir,this.robot.x=t+this.mapData.robotX*this.mapDrawer.gridSize,this.robot.y=e+this.mapData.robotY*this.mapDrawer.gridSize}},{key:"turnLeft",value:function(){this.mapData.robotDir=(this.mapData.robotDir+3)%4,this.drawRobot()}},{key:"turnRight",value:function(){this.mapData.robotDir=(this.mapData.robotDir+1)%4,this.drawRobot()}},{key:"step",value:function(t){var e=this,r=[[1,0],[0,1],[-1,0],[0,-1]],n=function(t,n,o){var a=t+r[o][0],i=n+r[o][1];return a>=1&&a<=e.mapData.numColumns&&i>=1&&i<=e.mapData.numRows?[a,i]:null},o=n(this.mapData.robotX,this.mapData.robotY,this.mapData.robotDir);this.mapData.wallAt(this.mapData.robotX,this.mapData.robotY)[this.mapData.robotDir]?t&&t():(this.mapData.robotX=o[0],this.mapData.robotY=o[1],this.drawRobot())}}]),t}();e.InteractiveControl=function(t){function e(t){o(this,e);var r=a(this,Object.getPrototypeOf(e).call(this,t));return document.addEventListener("keydown",function(t){var e=37,n=38,o=39;switch(t.keyCode){case e:r.turnLeft();break;case o:r.turnRight();break;case n:r.step(r.onError)}}),r}return i(e,t),e}(c)}])});