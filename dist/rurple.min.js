!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PIXI")):"function"==typeof define&&define.amd?define(["PIXI"],e):"object"==typeof exports?exports.rurple=e(require("PIXI")):t.rurple=e(t.PIXI)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="dist/",e(0)}([function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.control=e.view=void 0;var o=r(1),i=n(o),a=r(5),u=n(a);e.view={Player:i["default"]},e.control={SimpleControl:u.SimpleControl,InteractiveControl:u.InteractiveControl}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(2),u=n(a),s=r(4),c=n(s),l=function(){function t(e,r){o(this,t),this.mapData=new c["default"](e),this.mapDrawer=new u["default"](r,this.mapData)}return i(t,[{key:"attachAt",value:function(t){t.appendChild(this.mapDrawer.renderer.view),this.startAnimate()}},{key:"startAnimate",value:function(){var t=this,e=function r(){requestAnimationFrame(r),t.mapDrawer.render()};e()}}]),t}();e["default"]=l},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(3),c=n(s),l=function(t){function e(t,r){o(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return t=t||{},t.renderWidth=t.renderWidth||800,t.renderHeight=t.renderHeight||600,t.backgroundColor=t.hasOwnProperty("backgroundColor")?t.backgroundColor:11259375,t.lineColor=t.hasOwnProperty("lineColor")?t.lineColor:0,n.config=t,n.mapData=r,n.graphics=new c.Graphics,n.addChild(n.graphics),n.renderer=c.autoDetectRenderer(n.config.renderWidth,n.config.renderHeight,{backgroundColor:n.config.backgroundColor}),n.draw(),n}return a(e,t),u(e,[{key:"draw",value:function(){this.graphics.clear();var t=10,e=Math.min((this.config.renderWidth-2*t)/this.mapData.numColumns,(this.config.renderHeight-2*t)/this.mapData.numRows);this.graphics.lineStyle(2,this.config.lineColor,1);for(var r=1;r<this.mapData.numColumns;r++)this.graphics.moveTo(r*e,0),this.graphics.lineTo(r*e,this.mapData.numRows*e);for(var r=1;r<this.mapData.numColumns;r++)this.graphics.moveTo(0,r*e),this.graphics.lineTo(this.mapData.numColumns*e,r*e);this.graphics.lineStyle(5,this.config.lineColor,1),this.graphics.moveTo(0,0),this.graphics.lineTo(this.mapData.numColumns*e,0),this.graphics.lineTo(this.mapData.numColumns*e,this.mapData.numRows*e),this.graphics.lineTo(0,this.mapData.numRows*e),this.graphics.lineTo(0,0),this.graphics.x=(this.config.renderWidth-e*this.mapData.numColumns)/2,this.graphics.y=(this.config.renderHeight-e*this.mapData.numRows)/2,this.gridSize=e}},{key:"render",value:function(){this.draw(),this.renderer.render(this)}}]),e}(c.Container);e["default"]=l},function(e,r){e.exports=t},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){r(this,t),e=e||{},this._numRows=e.numRows||15,this._numColumns=e.numColumns||15,this.robotX=e.hasOwnProperty("robotX")?e.robotX:1,this.robotY=e.hasOwnProperty("robotX")?e.robotY:1,this.robotDir=e.robotDir||0}return n(t,[{key:"numRows",get:function(){return this._numRows}},{key:"numColumns",get:function(){return this._numColumns}}]),t}();e["default"]=o},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveControl=e.SimpleControl=void 0;var s=r(3),c=n(s),l=function(t){function e(t){o(this,e);var r=i(this,Object.getPrototypeOf(e).call(this)),n=new c.Graphics;return n.beginFill(2236962),n.drawCircle(0,0,t),n.beginFill(16777215),n.drawCircle(7,0,2),r.addChild(n),r}return a(e,t),e}(c.Container),h=e.SimpleControl=function(){function t(e){o(this,t),this.mapDrawer=e.mapDrawer,this.mapData=e.mapData,this.robot=new l(this.mapDrawer.gridSize/2-5),this.mapDrawer.addChild(this.robot),this.drawRobot()}return u(t,[{key:"drawRobot",value:function(){var t=this.mapDrawer.graphics.x-this.mapDrawer.gridSize/2,e=this.mapDrawer.graphics.y-this.mapDrawer.gridSize/2;this.robot.rotation=.5*Math.PI*this.mapData.robotDir,this.robot.x=t+this.mapData.robotX*this.mapDrawer.gridSize,this.robot.y=e+this.mapData.robotY*this.mapDrawer.gridSize}},{key:"turnLeft",value:function(){this.mapData.robotDir=(this.mapData.robotDir+3)%4,this.drawRobot()}},{key:"turnRight",value:function(){this.mapData.robotDir=(this.mapData.robotDir+1)%4,this.drawRobot()}},{key:"step",value:function(t){var e=this,r=[[1,0],[0,1],[-1,0],[0,-1]],n=function(t,n,o){var i=t+r[o][0],a=n+r[o][1];return i>=1&&i<=e.mapData.numColumns&&a>=1&&a<=e.mapData.numRows?[i,a]:null},o=n(this.mapData.robotX,this.mapData.robotY,this.mapData.robotDir);o?(this.mapData.robotX=o[0],this.mapData.robotY=o[1],this.drawRobot()):t&&t()}}]),t}();e.InteractiveControl=function(t){function e(t){o(this,e);var r=i(this,Object.getPrototypeOf(e).call(this,t));return document.addEventListener("keydown",function(t){var e=37,n=38,o=39;switch(t.keyCode){case e:r.turnLeft();break;case o:r.turnRight();break;case n:r.step(r.onError)}}),r}return a(e,t),e}(h)}])});